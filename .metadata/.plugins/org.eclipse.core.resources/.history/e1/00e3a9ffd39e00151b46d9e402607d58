package com.bomber.entities;

import java.util.ArrayList;

import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.utils.Array;
import com.bomber.*;
import handlers.*;

/** INFORMAÇÕES SOBRE A INTELIGÊNCIA ARTIFICIAL
 * 1) Verificar quantos inimigos existem vivos
 * a) Caso tenham três vivos:
 *  
 * 
 * 
 * 2) Verificar posição do bomberman
 * 3) Verificar posição de bombas no campo
 *  */

public class Bagura {
	
	private int numVivos;
	
	private Enemy enemy1;
	private Enemy enemy2;
	private Enemy enemy3;
	
	private ArrayList<Bomb> bombs;
	
	public Bagura(Enemy e1, Enemy e2, Enemy e3) {
		numVivos = 3;
		this.enemy1 = e1;
		this.enemy2 = e2;
		this.enemy3 = e3;
		bombs = new ArrayList<Bomb>();
	}
	
	public void movimentarInimigos(Player player, MyContactListener cl) {		
		Enemy s1, s2;
		int[][] posicao = this.posicaoBombas();
		int x = (int) player.getPosition().x/32, y = (int) player.getPosition().y/32;
		
		// Verificar quantos inimigos estão vivos
		if(numVivos == 3) {
			int x1, x2, x3, y1, y2, y3;
			
			// Salvando a posição dos inimigos
			x1 = (int) enemy1.getPosition().x/32;
			y1 = (int) enemy1.getPosition().y/32;
			x2 = (int) enemy2.getPosition().x/32;
			y2 = (int) enemy2.getPosition().y/32;
			x3 = (int) enemy3.getPosition().x/32;
			y3 = (int) enemy3.getPosition().y/32;
			
			
			
			
		} else if (numVivos == 2) {
			int x1, x2, y1, y2;
			
			// Verificando quem está morto
			if(cl.isEnemy1dead()) {
				s1 = enemy2;
				s2 = enemy3;
			} else if(cl.isEnemy2dead()) {
				s1 = enemy1;
				s2 = enemy3;
			} else {
				s1 = enemy1;
				s2 = enemy2;
			}
			
			// Salvando a posição dos inimigos
			x1 = (int) s1.getPosition().x/32;
			y1 = (int) s1.getPosition().y/32;
			x2 = (int) s2.getPosition().x/32;
			y2 = (int) s2.getPosition().y/32;
			
			
			
		} else {
			int x1, y1;
			
			// Verificando quem está vivo
			if(!cl.isEnemy1dead())
				s1 = enemy1;
			else if(!cl.isEnemy2dead())
				s1 = enemy2;
			else
				s1 = enemy3;
			
			// Salvando a posição do inimigo
			x1 = (int) s1.getPosition().x/32;
			y1 = (int) s1.getPosition().y/32;
			
			// Verificando as posições do inimigo em relação ao jogador
			
		}
		
		
		
		
	}
	
	/** Retorna uma matriz com 0 aonde não existe bomba e 1 aonde existe */
	private int[][] posicaoBombas() {
		int[][] posicao = new int[13][13];
		
		for(int i = 0; i < 13; i++) 
			for(int j = 0; j < 13; j++) 
				posicao[i][j] = 0;
				
		for(Bomb b : bombs) 
			posicao[(int)(b.getPosition().x-16)/32][(int)(b.getPosition().y-16)/32] = 1;
		
		return posicao;
	}
	
	/** Coisa rosa */
	private void moveEnemy1() {
		
	}
	
	/** Fantasma estranho */
	private void moveEnemy2() {
		
	}
	
	/** Morcego da hora */
	private void moveEnemy3() {
		
	}
	
	public int getNumVivos() { return numVivos; }
	public void morreu() { numVivos--; }
	
}
